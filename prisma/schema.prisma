// Prisma schema for ResumeAI with Supabase (PostgreSQL)
// Learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"

  previewFeatures = ["driverAdapters"]
}
datasource db {
  provider = "postgresql"
}

model Resume {
  id        String   @id @default(cuid())
  resumeId  String   @unique
  userId    String
  title     String
  firstName String?
  lastName  String?
  jobTitle  String?
  address   String?
  phone     String?
  email     String?
  summary   String?
  themeColor String   @default("rgb(79, 70, 229)")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  experience Experience[]
  education  Education[]
  skills     Skill[]

  @@index([userId])
}

model Experience {
  id           String   @id @default(cuid())
  resumeId     String
  jobTitle     String?  @map("jobTitle")
  companyName  String?
  city         String?
  state        String?
  startDate    String?
  endDate      String?
  description  String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  resume Resume @relation(fields: [resumeId], references: [resumeId], onDelete: Cascade)

  @@index([resumeId])
}

model Education {
  id             String   @id @default(cuid())
  resumeId       String
  schoolName     String?  @map("schoolName")
  degree         String?
  fieldOfStudy   String?  @map("fieldOfStudy")
  startDate      String?
  endDate        String?
  description    String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  resume Resume @relation(fields: [resumeId], references: [resumeId], onDelete: Cascade)

  @@index([resumeId])
}

model Skill {
  id        String   @id @default(cuid())
  resumeId  String
  skillName  String?  @map("skillName")
  proficiency String? @map("proficiency")
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  resume Resume @relation(fields: [resumeId], references: [resumeId], onDelete: Cascade)

  @@index([resumeId])
}
